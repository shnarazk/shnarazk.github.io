<!doctype html><html style="has-navbar-fixed-top has-navbar-fixed-bottom" lang=ja><head><meta charset=utf-8><meta viewport="width=device-width, initial-scale=1"><link href="/favicon.ico?refresh=1" rel=icon type=image/x-icon><link href=https://shnarazk.github.io/atom.xml rel=alternate title=RSS type=application/atom+xml><link href="https://fonts.googleapis.com/css?family=Roboto+Mono&display=swap" rel=stylesheet><link href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css rel=stylesheet><link href=/style.css rel=stylesheet><link crossorigin href=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css integrity=sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X rel=stylesheet><script crossorigin defer integrity=sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4 src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js></script><script crossorigin defer integrity=sha384-LJ2FmexL77rmGm6SIpxq7y+XA6bkLzGZEgCywzKOZG/ws4va9fUVu2neMjvc3zdv src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/mathtex-script-type.min.js></script><script onload="renderMathInElement(document.body, {
				delimiters: [
					{left: '$$', right: '$$', display: true},
					{left: '$', right: '$', display: false},
					{left: '\\(', right: '\\)', display: false},
					{left: '\\[', right: '\\]', display: true}
				]
			});" crossorigin defer integrity=sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js></script><script>document.addEventListener('DOMContentLoaded',()=>{const a=Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'),0);if(a.length>0){a.forEach(b=>{b.addEventListener('click',()=>{const c=b.dataset.target;const d=document.getElementById(c);b.classList.toggle('is-active');d.classList.toggle('is-active')})})}})</script><title>Just a note</title><body><nav aria-label="main navigation" class="navbar is-fixed-top is-light" role=navigation><div class=navbar-brand><div class=navbar-item> <i class="fas fa-book-open has-text-info"></i> <a class=title href=/>Similarity of Clauses</a></div><a aria-expanded=false aria-label=menu class=navbar-burger data-target=navigation-bar role=button> <span aria-hidden=true></span> <span aria-hidden=true></span> <span aria-hidden=true></span> </a></div><div class=navbar-menu id=navigation-bar><div class=navbar-end><div class="navbar-item has-dropdown" id=navigation-dropdown><a onclick="document.getElementById('navigation-dropdown').classList.toggle('is-active')" class=navbar-link></a><div class="navbar-dropdown is-right is-size-5"><a class=navbar-item href=/tags> <i class="fas fa-tags"></i> Tags </a><a class=navbar-item href=/about> <i class="fas fa-question-circle"></i> About </a><a class=navbar-item href=/atom.xml> <i class="fas fa-rss-square"></i>  RSS </a></div></div></div></div></nav><div style=padding-top:3rem><div class=article-banner><img src="https://images.unsplash.com/photo-1483528237748-d9d8b5cae06d?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80"></div><div class=article-banner-caption>cover image https://unsplash.com/photos/UsSfqYdR64Q**</div><div class=article-container><h1 class="subtitle has-text-info has-text-weight-semibold">夏休み実験室</h1><p>動的なリスタートは本当に有効なのだろうか？ 自分がやってきた種々の実験結果からはLubyリスタートとの差は（有意）にあるように思うが、 一方でせいぜい定数倍の差のようにも思える。 パラメータを増やせば増やすほど手が届かない部分が増えてしまうので、もうそろそろ色々カウンターを突っ込んだりするくらいならLubyでいいのではいう方向にかなり傾いている。 そもそもGlucose流のLBDのEMAを元にしたforce restartが有効であるためには学習節のよさは独立分布ではないことが前提なんだけど、これは本当なんだだろうか？ どこかで評価してあっただろうか？ 手っ取り早くブランチ切って自分でやってみた。<ul><li>実験対象: UUF250 100問<li>EMA補正を掛けた Slpr-0.6.2 で rst-lbd-len を色々変えて、学習節が追加されるたびに(LBDのEMA, 新学習節のLBD)を出力。</ul><pre style=background:#fff;color:#323232><code><span># 2021 branchを使用
</span><span>$ parallel 'splrl-lbd {}' ::: uuf250*.cnf
</span><span>$ cargo run --bin ??? < uuf*.csv > LBDn.csv　#　新学習節LBDの分布を平均値に置き換え
</span><span>$ 適当にプロット
</span></code></pre><p>まずUU250に対するデフォルト設定において、矛盾発生の決定レベルに対するLBDをプロットすると以下のようになる。<p><img alt src=/img/2021/01-26/UUF250-cDL-ave.png><p>矛盾発生決定レベルとLBDの間には相関はほぼない。 どのような発展においてもそれなりによい学習節が生成されることを考慮しなければならない。 下図はそのヒートマップである。実際には大きな決定レベルは出現頻度が少ない。 極端に高いレベルを避けるよりも持続する高レベルを避けることが重要となるのだろう。<p><img alt src=/img/2021/01-26/UUF250-cDL-heatmap.png><p>次にEMAの長さを24（デフォルト）,5, 3と変えて、LBDのEMAに対する新規学習節のLBDをプロットしてみたのが以下の図。<p><img alt src=/img/2021/01-26/UUF250-LBD-ave.png><p>決定レベルと違い、極めて強い相関が得られたことからLBDのEMAはよい未来予測になっていると言える。 さらに長さを長くする方がより良い結果が得られる頃から同じような長さの節がしばらく生成されるという傾向があると言えよう。<p>同じデータを平均値ではなくヒートマップで可視化してみた。 上図が矛盾発生ごとにリスタートを掛けて全く連続性を排除したもので、下図はリスタートをしなかったものである。<p><img alt src=/img/2021/01-26/UUF250-rlt0-heatmap.png><p><img alt src=/img/2021/01-26/UUF250-norestart-heatmap.png><p>後者の方がより小さいLBDが生成されている。実際に実際実行時間も後者の方が圧倒的に短い。 無作為な探索空間の選択よりもLBD値を使った戦略の方が、LBDの小さな領域に長く滞在できていると思われる。<p>両者はリスタートに関して両極端な戦略になっている。 なぜ、no-restartの方がもう一つの極端なanytine-restart戦略より圧倒的によいのだろうか。 activityのメカニズムから矛盾解消の対象になった変数は再び選択されやすく、したがってassertされるまで集中的に選択されることが期待される。 一方、anytime restartは（バックトラックと比べて網羅的再構築なので）対象が逸脱しやすく、activityの恩恵を十分に得ることができないからだろう。 初期状態はともかく、矛盾はそれなりに十分に深く調べて（assertを見つける努力をして）からリスタートすべきである。<p>ということで、ヒートマップにおいてno-restart の方が良い結果を示しているのは、assertがより速く求解が進むことで、より簡単な問題を長い間、対象にできていたからではないだろうか。<h2 id=結論>結論</h2><ul><li>探索空間はLBDで分類できるクラスタから構成されている。<li>より良いクラスタを選ぶことは実行速度の改善につながる。<li>LBDのEMAはクラスタを選ぶためのよい尺度となっている。少なくともランダム選択よりはよい。<li>突発的な大きなLBDを持つ節を避けるのではなく、平均EMAが大きなグループ（クラスタ）に突入している時に（できれば早期に）脱出できるというのがGlucose流の動的リスタートの持つ効果である。</ul><hr><h1 id=本文を書いたことで後ろに回されてしまったイントロとベルリンの壁>本文を書いたことで後ろに回されてしまったイントロとベルリンの壁</h1><p>論文書くのは仕事じゃない。しかし一年に一度くらいは開発ではなくて、文章をまとめる一ヶ月があってもいいかもね。そもそも今年もCompetitionに出しそびれたし。それに夏といえば、宿題やるのが日本の文化。 9月1日提出に間に合うようになんかしよう。爆音で音楽聴きながらlatex的なことをしよう。<h1 id=2020-07-24>2020-07-24</h1><ul><li>旧題: Restart as A Multi-Armed Bandid Problem<li>新題: Lives of Clauses</ul><h1 id=2020-07-27>2020-07-27</h1><p>0.4.2がいい結果を出しそうなので、それをリリースしてから、なぜ0.4.2がいいのかを説明できるようなものにしよう。 "Lives of Clauses"はいいタイトル。<h1 id=2020-08-12>2020-08-12</h1><p>Splr-0.4.2のリリースがずるずると延びてしまっていまだにとりかかれてない。。。。 うーん、自分で言い出したくせに8月31日の1日でやっつけることになるのか。 コロナのせいにできるような言い訳を考えておこう。。。<h1 id=2020-08-24>2020-08-24</h1><p>あと数日でSplr-0.4.2 改め Splr-0.5.0 がリリースできる。 そして、もう数日しか夏休みは残ってないんですけどどうしましょう。<h1 id=2020-09-01>2020-09-01</h1><p>今年の夏休みは9月下旬にはじまるという話を聞いたので、まだ手をつけない。<h1 id=2021-01-13>2021-01-13</h1><p>そろそろ手が付けられそうになってきたので、テーマ案を考える。<ul><li>案1: 学習節の一生<li>案2: 意外に影響が大きいvivicationの効果測定</ul><p>ずっと案1のつもりだったけど、今日急に案2もいいかもと思い出した。 どちらにしろ今週中には始めよう。 夏休みの宿題を1月に始めるという意味で非常事態を宣言するのだ。<h1 id=2021-01-14>2021-01-14</h1><p><a href=https://github.com/shnarazk/splr/commit/55c6161a17b18752d8c33f9a5de9ae8e25cc88fc>Splr-0.6.0</a> リリースした。夏休み開始。<h1 id=2021-01-18>2021-01-18</h1><p>0.6.0はリリースしたけどどうせなら0.6.2をリリースしてから開始しよう。明日の予定。テーマはマルコフ性。<div class="date-footer is-size-7 is-family-code has-text-grey has-text-right" style=margin-top:2rem>Published at 2020-07-18   Last updated 2021-01-26 </div></div><nav class="navbar is-fixed-bottom" aria-label=navigation id=bottombar><div class=navbar-brand><div class=navbar-item><a class=tagword href=/tags/#sat>#SAT</a></div><div class=navbar-item><a class=tagword href=/tags/#splr>#splr</a></div></div></nav><footer class="copyright is-size-6 has-text-info">Copyright 2019-2023 Narazaki Shuji.</footer>