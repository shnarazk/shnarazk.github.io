---
title: Water in Blender
updated: 2021-11-16
extra:
  banner: /2021/2021-11-16_banner.jpg
taxonomies:
    tags: ["Blender"]
---
# 2021-11-16

Asset強化月間、次のお題は水。

検索して上位に来ていたサイトを見てみる。
refraction shaderや
glass shader
transparent shader
などなどを組み合わせて作ろうというのはわかるのだけど、なぜ単なるPrincipled BSDFではいけないのだろう。
このshaderだって透明度も屈折度も持っているじゃないか。
と思うのだが実際このshaderのIORは効いていないように思える。

で最初は言われる通り、途中から、これはPrincipled BSDFとrefraction shaderだけでできるのではなかろうか、
ただし、

- 裏側が1.33で屈折しながら透けて見える部分と
- 表面で反射している部分との

合成をカメラ角度に依存させるのが正解で、単にそれだけとしか思えなくなってきた。

ということは何を使えばいいのだ？
geometryのreflectionか？
やってみるとプレビュー画面は非常に嘘くさい。要はcos類似度的なものが欲しいのだが、どうも違う気がする。
その一方でネットワークをちゃんと組み立ててみるとそれなりの説得力がある気がする。
（まあ、レンダリング時間は大変だけど。）

バリエーションとして、波が立っている状況用のbump付きとそうでないものの2種類を用意してみた。

以下は「波立つ水面」の設定でHDRIの画像を見下ろしたもの。まるで印象派のようになってしまったが元画像と比べると、まあこれでもいいかも。

![](/2021/2021-11-16-water.jpg)

