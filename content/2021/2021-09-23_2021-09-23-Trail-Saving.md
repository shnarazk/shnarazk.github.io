---
title: Trail Saving instead of Chrono-BT
extra:
  banner: /2021/2021-09-23_banner.jpg
  banner_caption: Let's recyle!
  subtitle: I gave up it.
taxonomies:
    tags: ["SAT", "splr", "chrono-BT", "trail-saving"]
---
Chrono-BTがちゃんと動かない！
諦めてもっと新しいアプローチに乗り換える！

```rust
fn backtrack(&mut self, bt_level: DecisionLevel) {
  let current_level = self.decision_level();

  for l in self.trail[self.len_upto(bt_level + 1)..self.len_upto(current_level - 1)] {
    let vi = l.vi()
    // copy the reasons
    self.reason_saved[vi] = self.reason[vi];
    // save the assigns
    self.trail_saved[vi] = self.reason[vi];
  }
  // run the original prodecedure to truncate trail.
}
```

```rust
fn propagate(&mut self) -> Option<ConflictContext> {
    // TODO
    None
}
```

```rust
fn use_saved_trail(&mut self) -> Option<Lit> {
    // TODO
    None
}
```
