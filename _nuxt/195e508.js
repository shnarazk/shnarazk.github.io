(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{593:function(n){n.exports=JSON.parse('{"title":"JSONファイルをドラッグ&ドロップする","subtitle":"SwiftUIの話","date":"2020-11-08T00:00:00.000Z","tags":["Swift"],"bodyContent":"画像ファイルとかURLとかをドロップする話はそこそこ見つかるけど、JSONファイルをドロップするのに手こずったのでメモ。\\n\\n```swift\\n  NavigationView { ... }\\n  .onDrop(of: [\\"public.json\\"], isTargeted: nil) { providers, location in\\n       if let item = providers.first {\\n           item.loadItem(forTypeIdentifier: \\"public.json\\", options: nil) { (urlData, error) in\\n               if let url = urlData as? URL {\\n                   self.json = loadJson(url: url)\\n               }\\n           }\\n           return true\\n       }\\n       return false\\n }\\n```\\n\\n* `\\"public.json\\"` の`public`とはなんなのか？\\n* `isTargeted` とはなんなのか？\\n* `Item` と `Object` の違いがよーわかってない。\\n* 参考にしたページ（複数）ではクロージャの中には例のSystemサービススレッドにfetchをお願いするコードが入っていたが、ローカルファイルをロードするのにそれはいらんじゃろ、ということで削除。\\n* `urlData`から`URL`型を作る過程も1ステップ削除してある。\\n* `url` は `Data(contentOf:)`の引数に使える。","bodyHtml":"<p>画像ファイルとかURLとかをドロップする話はそこそこ見つかるけど、JSONファイルをドロップするのに手こずったのでメモ。</p>\\n<pre><code class=\\"hljs\\"><span class=\\"hljs-type\\">NavigationView</span> { <span class=\\"hljs-operator\\">...</span> }\\n  .onDrop(of: [<span class=\\"hljs-string\\">&quot;public.json&quot;</span>], isTargeted: <span class=\\"hljs-literal\\">nil</span>) { providers, location <span class=\\"hljs-keyword\\">in</span>\\n       <span class=\\"hljs-keyword\\">if</span> <span class=\\"hljs-keyword\\">let</span> item <span class=\\"hljs-operator\\">=</span> providers.first {\\n           item.loadItem(forTypeIdentifier: <span class=\\"hljs-string\\">&quot;public.json&quot;</span>, options: <span class=\\"hljs-literal\\">nil</span>) { (urlData, error) <span class=\\"hljs-keyword\\">in</span>\\n               <span class=\\"hljs-keyword\\">if</span> <span class=\\"hljs-keyword\\">let</span> url <span class=\\"hljs-operator\\">=</span> urlData <span class=\\"hljs-keyword\\">as?</span> <span class=\\"hljs-type\\">URL</span> {\\n                   <span class=\\"hljs-keyword\\">self</span>.json <span class=\\"hljs-operator\\">=</span> loadJson(url: url)\\n               }\\n           }\\n           <span class=\\"hljs-keyword\\">return</span> <span class=\\"hljs-literal\\">true</span>\\n       }\\n       <span class=\\"hljs-keyword\\">return</span> <span class=\\"hljs-literal\\">false</span>\\n }</code></pre><ul>\\n<li><code>&quot;public.json&quot;</code> の<code>public</code>とはなんなのか？</li>\\n<li><code>isTargeted</code> とはなんなのか？</li>\\n<li><code>Item</code> と <code>Object</code> の違いがよーわかってない。</li>\\n<li>参考にしたページ（複数）ではクロージャの中には例のSystemサービススレッドにfetchをお願いするコードが入っていたが、ローカルファイルをロードするのにそれはいらんじゃろ、ということで削除。</li>\\n<li><code>urlData</code>から<code>URL</code>型を作る過程も1ステップ削除してある。</li>\\n<li><code>url</code> は <code>Data(contentOf:)</code>の引数に使える。</li>\\n</ul>\\n","dir":"article/.json/2020","base":"2020-11-08-Drop-a-JSON-file.json","ext":".json","sourceBase":"2020-11-08-Drop-a-JSON-file.md","sourceExt":".md"}')}}]);