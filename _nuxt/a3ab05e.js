(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{521:function(t){t.exports=JSON.parse('{"title":"How to fix a nuisance by Intero on Emacs?","subtitle":"InteroでEmacsがおかしくなる問題","date":"2018-07-06T00:00:00.000Z","tags":["emacs","haskell"],"bodyContent":"At a directory without stack configuration, emacs is *devastated* by the initialization step of Intero.\\nThis is a record of my atemps to fix.\\n\\n### 2018-07-06: Stop it!\\n\\n```lisp\\n(defun auto-revert-notify-add-watch ()\\n  \\"Enable file notification for current buffer\'s associated file.\\"\\n  ;; We can assume that `buffer-file-name\' and\\n  ;; `auto-revert-use-notify\' are non-nil.\\n  (if (or (string-match auto-revert-notify-exclude-dir-regexp\\n\\t\\t\\t(expand-file-name (or default-directory \\"\\")))\\n\\t  (file-symlink-p (or buffer-file-name default-directory)))\\n\\n      ;; Fallback to file checks.\\n      (setq-local auto-revert-use-notify nil)\\n\\n    (when (not auto-revert-notify-watch-descriptor)\\n      (setq auto-revert-notify-watch-descriptor\\n\\t    (ignore-errors\\n\\t      (if buffer-file-name\\n\\t\\t  (file-notify-add-watch\\n\\t\\t   (expand-file-name buffer-file-name default-directory)\\n\\t\\t   \'(change attribute-change)\\n\\t\\t   \'auto-revert-notify-handler)\\n\\t\\t(file-notify-add-watch\\n\\t\\t (expand-file-name default-directory)\\n\\t\\t \'(change)\\n\\t\\t \'auto-revert-notify-handler))))\\n      (if auto-revert-notify-watch-descriptor\\n\\t  (progn\\n\\t    (puthash\\n\\t     auto-revert-notify-watch-descriptor\\n\\t     (cons (current-buffer)\\n\\t\\t   (gethash auto-revert-notify-watch-descriptor\\n\\t\\t\\t    auto-revert-notify-watch-descriptor-hash-list))\\n\\t     auto-revert-notify-watch-descriptor-hash-list)\\n\\t    (add-hook \'kill-buffer-hook\\n\\t\\t      #\'auto-revert-notify-rm-watch nil t))\\n\\t;; Fallback to file checks.\\n\\t(setq-local auto-revert-use-notify nil)))))\\n```","bodyHtml":"<p>At a directory without stack configuration, emacs is <em>devastated</em> by the initialization step of Intero.\\nThis is a record of my atemps to fix.</p>\\n<h3>2018-07-06: Stop it!</h3>\\n<pre><code class=\\"hljs\\">(<span class=\\"hljs-name\\">defun</span> auto-revert-notify-add-watch ()\\n  <span class=\\"hljs-string\\">\\"Enable file notification for current buffer\'s associated file.\\"</span>\\n  <span class=\\"hljs-comment\\">;; We can assume that `buffer-file-name\' and</span>\\n  <span class=\\"hljs-comment\\">;; `auto-revert-use-notify\' are non-nil.</span>\\n  (<span class=\\"hljs-name\\">if</span> (<span class=\\"hljs-name\\">or</span> (<span class=\\"hljs-name\\">string-match</span> auto-revert-notify-exclude-dir-regexp\\n\\t\\t\\t(<span class=\\"hljs-name\\">expand-file-name</span> (<span class=\\"hljs-name\\">or</span> default-directory <span class=\\"hljs-string\\">\\"\\"</span>)))\\n\\t  (<span class=\\"hljs-name\\">file-symlink-p</span> (<span class=\\"hljs-name\\">or</span> buffer-file-name default-directory)))\\n\\n      <span class=\\"hljs-comment\\">;; Fallback to file checks.</span>\\n      (<span class=\\"hljs-name\\">setq-local</span> auto-revert-use-notify <span class=\\"hljs-literal\\">nil</span>)\\n\\n    (<span class=\\"hljs-name\\">when</span> (<span class=\\"hljs-name\\">not</span> auto-revert-notify-watch-descriptor)\\n      (<span class=\\"hljs-name\\">setq</span> auto-revert-notify-watch-descriptor\\n\\t    (<span class=\\"hljs-name\\">ignore-errors</span>\\n\\t      (<span class=\\"hljs-name\\">if</span> buffer-file-name\\n\\t\\t  (<span class=\\"hljs-name\\">file-notify-add-watch</span>\\n\\t\\t   (<span class=\\"hljs-name\\">expand-file-name</span> buffer-file-name default-directory)\\n\\t\\t   \'(change attribute-change)\\n\\t\\t   \'auto-revert-notify-handler)\\n\\t\\t(<span class=\\"hljs-name\\">file-notify-add-watch</span>\\n\\t\\t (<span class=\\"hljs-name\\">expand-file-name</span> default-directory)\\n\\t\\t \'(change)\\n\\t\\t \'auto-revert-notify-handler))))\\n      (<span class=\\"hljs-name\\">if</span> auto-revert-notify-watch-descriptor\\n\\t  (<span class=\\"hljs-name\\">progn</span>\\n\\t    (<span class=\\"hljs-name\\">puthash</span>\\n\\t     auto-revert-notify-watch-descriptor\\n\\t     (<span class=\\"hljs-name\\">cons</span> (<span class=\\"hljs-name\\">current-buffer</span>)\\n\\t\\t   (<span class=\\"hljs-name\\">gethash</span> auto-revert-notify-watch-descriptor\\n\\t\\t\\t    auto-revert-notify-watch-descriptor-hash-list))\\n\\t     auto-revert-notify-watch-descriptor-hash-list)\\n\\t    (<span class=\\"hljs-name\\">add-hook</span> \'kill-buffer-hook\\n\\t\\t      #\'auto-revert-notify-rm-watch <span class=\\"hljs-literal\\">nil</span> <span class=\\"hljs-literal\\">t</span>))\\n\\t<span class=\\"hljs-comment\\">;; Fallback to file checks.</span>\\n\\t(<span class=\\"hljs-name\\">setq-local</span> auto-revert-use-notify <span class=\\"hljs-literal\\">nil</span>)))))</code></pre>","dir":"article/.json/2018","base":"2018-07-06-broken-intero.json","ext":".json","sourceBase":"2018-07-06-broken-intero.md","sourceExt":".md"}')}}]);