(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{552:function(e){e.exports=JSON.parse('{"title":"Building Emacs27.nix on MacOS","subtitle":"as an overlay","date":"2020-04-11T00:00:00.000Z","tags":["NixOS","Emacs"],"bodyContent":"* `?`を使ったカスタマイズはemacsをオーバーレイする前に解決されてしまっているので`call-process`を呼び\\n  出すのでなければ、（`nativeBuildInputs`に対してやっているように）自前で各アトリビュートを上書きするしかない。\\n* なんか`rev`が無視されているような気がする -> ちゃんとダミー値を与えて一回失敗させないといけない。\\n  これでちゃんと更新されるようになった。\\n\\n```\\n# ~/.config/nixpkgs/overlays/emacs27.nix\\nself: super:\\n{\\n  emacs27 = super.emacs.overrideAttrs (attrs: rec {\\n    pname = \\"emacs27\\";\\n    # srcRepo = true;\\n    name = \\"emacs27-${version}\\";\\n    version = \\"27.0.90\\";\\n    src = super.fetchFromGitHub {\\n      owner = \\"emacs-mirror\\";\\n      repo = \\"emacs\\";\\n      rev = \\"6057d79a4eb4b95037068a1e9335a2418b2da5ec\\";\\n      hash = \\"sha256:11111111111111111111111111111111111111111111111111111\\";\\n      #hash = \\"sha256:0dyb08afrkfic765zkwy27nnj0h8ays5likgfbdhwhbpdnmrgv8x\\";\\n    };\\n    patches = [];\\n    preConfigure = \'\'\\n      ./autogen.sh\\n    \'\' + \'\'\\n      substituteInPlace lisp/international/mule-cmds.el \\\\\\n        --replace /usr/share/locale ${super.gettext}/share/locale\\n  \\n      for makefile_in in $(find . -name Makefile.in -print); do\\n          substituteInPlace $makefile_in --replace /bin/pwd pwd\\n      done\\n    \'\';\\n    nativeBuildInputs = [ super.pkgconfig ]\\n      ++ [ super.autoconf super.automake super.texinfo ];\\n    buildInputs = super.emacs.buildInputs\\n        ++ [ super.autoconf super.automake super.texinfo ]\\n\\t++ [ AppKit Carbon Cocoa IOKit OSAKit Quartz QuartzCore WebKit ImageCaptureCore GSS ImageIO ];\\n    inherit (super.darwin.apple_sdk.frameworks)\\n        AppKit Carbon Cocoa IOKit OSAKit Quartz QuartzCore WebKit\\n        ImageCaptureCore GSS ImageIO;\\n  });\\n}\\n```","bodyHtml":"<ul>\\n<li><code>?</code>を使ったカスタマイズはemacsをオーバーレイする前に解決されてしまっているので<code>call-process</code>を呼び\\n出すのでなければ、（<code>nativeBuildInputs</code>に対してやっているように）自前で各アトリビュートを上書きするしかない。</li>\\n<li>なんか<code>rev</code>が無視されているような気がする -&gt; ちゃんとダミー値を与えて一回失敗させないといけない。\\nこれでちゃんと更新されるようになった。</li>\\n</ul>\\n<pre><code># ~/.config/nixpkgs/overlays/emacs27.nix\\nself: super:\\n{\\n  emacs27 = super.emacs.overrideAttrs (attrs: rec {\\n    pname = &quot;emacs27&quot;;\\n    # srcRepo = true;\\n    name = &quot;emacs27-${version}&quot;;\\n    version = &quot;27.0.90&quot;;\\n    src = super.fetchFromGitHub {\\n      owner = &quot;emacs-mirror&quot;;\\n      repo = &quot;emacs&quot;;\\n      rev = &quot;6057d79a4eb4b95037068a1e9335a2418b2da5ec&quot;;\\n      hash = &quot;sha256:11111111111111111111111111111111111111111111111111111&quot;;\\n      #hash = &quot;sha256:0dyb08afrkfic765zkwy27nnj0h8ays5likgfbdhwhbpdnmrgv8x&quot;;\\n    };\\n    patches = [];\\n    preConfigure = \'\'\\n      ./autogen.sh\\n    \'\' + \'\'\\n      substituteInPlace lisp/international/mule-cmds.el \\\\\\n        --replace /usr/share/locale ${super.gettext}/share/locale\\n  \\n      for makefile_in in $(find . -name Makefile.in -print); do\\n          substituteInPlace $makefile_in --replace /bin/pwd pwd\\n      done\\n    \'\';\\n    nativeBuildInputs = [ super.pkgconfig ]\\n      ++ [ super.autoconf super.automake super.texinfo ];\\n    buildInputs = super.emacs.buildInputs\\n        ++ [ super.autoconf super.automake super.texinfo ]\\n\\t++ [ AppKit Carbon Cocoa IOKit OSAKit Quartz QuartzCore WebKit ImageCaptureCore GSS ImageIO ];\\n    inherit (super.darwin.apple_sdk.frameworks)\\n        AppKit Carbon Cocoa IOKit OSAKit Quartz QuartzCore WebKit\\n        ImageCaptureCore GSS ImageIO;\\n  });\\n}\\n</code></pre>\\n","dir":"article/.json/2020","base":"2020-04-11-emacs27-on-nix.json","ext":".json","sourceBase":"2020-04-11-emacs27-on-nix.md","sourceExt":".md"}')}}]);