__NUXT_JSONP__("/2020/2020-07-18-summer-homework", {data:[{article:Object.create(null,{default:{writable:true,enumerable:true,value:{title:"Similarity of Clauses",subtitle:"夏休み実験室",date:"2021-01-26T00:00:00.000Z",tags:["SAT","splr"],banner:"https:\u002F\u002Fimages.unsplash.com\u002Fphoto-1483528237748-d9d8b5cae06d?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80",bodyContent:"**cover image: https:\u002F\u002Funsplash.com\u002Fphotos\u002FUsSfqYdR64Q**\n\n動的なリスタートは本当に有効なのだろうか？\n自分がやってきた種々の実験結果からはLubyリスタートとの差は（有意）にあるように思うが、\n一方でせいぜい定数倍の差のようにも思える。\nパラメータを増やせば増やすほど手が届かない部分が増えてしまうので、もうそろそろ色々カウンターを突っ込んだりするくらいならLubyでいいのではいう方向にかなり傾いている。\nそもそもGlucose流のLBDのEMAを元にしたforce restartが有効であるためには学習節のよさは独立分布ではないことが前提なんだけど、これは本当なんだだろうか？\nどこかで評価してあっただろうか？\n手っ取り早くブランチ切って自分でやってみた。\n\n- 実験対象: UUF250 100問\n- EMA補正を掛けた Slpr-0.6.2 で rst-lbd-len を色々変えて、学習節が追加されるたびに(LBDのEMA, 新学習節のLBD)を出力。\n\n```\n# 2021 branchを使用\n$ parallel 'splrl-lbd {}' ::: uuf250*.cnf\n$ cargo run --bin ??? \u003C uuf*.csv \u003E LBDn.csv　#　新学習節LBDの分布を平均値に置き換え\n$ 適当にプロット\n```\n\nまずUU250に対するデフォルト設定において、矛盾発生の決定レベルに対するLBDをプロットすると以下のようになる。\n\n![](\u002Fimg\u002F2021\u002F01-26\u002FUUF250-cDL-ave.png)\n\n矛盾発生決定レベルとLBDの間には相関はほぼない。\nどのような発展においてもそれなりによい学習節が生成されることを考慮しなければならない。\n下図はそのヒートマップである。実際には大きな決定レベルは出現頻度が少ない。\n極端に高いレベルを避けるよりも持続する高レベルを避けることが重要となるのだろう。\n\n![](\u002Fimg\u002F2021\u002F01-26\u002FUUF250-cDL-heatmap.png)\n\n次にEMAの長さを24（デフォルト）,5, 3と変えて、LBDのEMAに対する新規学習節のLBDをプロットしてみたのが以下の図。\n\n![](\u002Fimg\u002F2021\u002F01-26\u002FUUF250-LBD-ave.png)\n\n決定レベルと違い、極めて強い相関が得られたことからLBDのEMAはよい未来予測になっていると言える。\nさらに長さを長くする方がより良い結果が得られる頃から同じような長さの節がしばらく生成されるという傾向があると言えよう。\n\n同じデータを平均値ではなくヒートマップで可視化してみた。\n上図が矛盾発生ごとにリスタートを掛けて全く連続性を排除したもので、下図はリスタートをしなかったものである。\n\n![](\u002Fimg\u002F2021\u002F01-26\u002FUUF250-rlt0-heatmap.png)\n\n![](\u002Fimg\u002F2021\u002F01-26\u002FUUF250-norestart-heatmap.png)\n\n後者の方がより小さいLBDが生成されている。実際に実際実行時間も後者の方が圧倒的に短い。\n無作為な探索空間の選択よりもLBD値を使った戦略の方が、LBDの小さな領域に長く滞在できていると思われる。\n\n## TODO: デフォルトでのヒートマップへの言及\n\n## no-restartは極端な戦略。なぜもう一つの極端なanytine-restart戦略より圧倒的によいのか。\n\nactivityのメカニズムから矛盾解消の対象になった変数は再び選択されやすく、したがってassertされるまで集中的に選択されることが期待される。\n一方、anytime restartは（バックトラックと比べて網羅的再構築なので）対象が逸脱しやすく、activityの恩恵を十分に得ることができない。\n初期状態はともかく、矛盾はそれなりに十分に深く調べて（assertを見つける努力をして）からリスタートすべきである。\n\nヒートマップにおいてno-restart の方が良い結果を示しているのは、assertがより速く進むことで、より簡単な問題を対象にできていたからではないだろうか。\n\n## 結論\n\n- 探索空間はLBDで分類できるクラスタから構成されている。\n- より良いクラスタを選ぶことは実行速度の改善につながる。\n- LBDのEMAはクラスタを選ぶためのよい尺度となっている。少なくともランダム選択よりはよい。\n- 突発的な大きなLBDを持つ節を避けるのではなく、平均EMAが大きなグループ（クラスタ）に突入している時に（できれば早期に）脱出できるというのがGlucose流の動的リスタートの持つ効果である。\n\n--------------------------------------------------------\n\n# 本文を書いたことで後ろに回されてしまったイントロとベルリンの壁\n\n論文書くのは仕事じゃない。しかし一年に一度くらいは開発ではなくて、文章をまとめる一ヶ月があってもいいかもね。そもそも今年もCompetitionに出しそびれたし。それに夏といえば、宿題やるのが日本の文化。\n9月1日提出に間に合うようになんかしよう。爆音で音楽聴きながらlatex的なことをしよう。\n\n# 2020-07-24\n\n* 旧題: Restart as A Multi-Armed Bandid Problem\n* 新題: Lives of Clauses\n\n# 2020-07-27\n\n0.4.2がいい結果を出しそうなので、それをリリースしてから、なぜ0.4.2がいいのかを説明できるようなものにしよう。\n\"Lives of Clauses\"はいいタイトル。\n\n# 2020-08-12\n\nSplr-0.4.2のリリースがずるずると延びてしまっていまだにとりかかれてない。。。。\nうーん、自分で言い出したくせに8月31日の1日でやっつけることになるのか。\nコロナのせいにできるような言い訳を考えておこう。。。\n\n# 2020-08-24\n\nあと数日でSplr-0.4.2 改め Splr-0.5.0 がリリースできる。\nそして、もう数日しか夏休みは残ってないんですけどどうしましょう。\n\n# 2020-09-01\n\n今年の夏休みは9月下旬にはじまるという話を聞いたので、まだ手をつけない。\n\n# 2021-01-13\n\nそろそろ手が付けられそうになってきたので、テーマ案を考える。\n\n- 案1: 学習節の一生\n- 案2: 意外に影響が大きいvivicationの効果測定\n\nずっと案1のつもりだったけど、今日急に案2もいいかもと思い出した。\nどちらにしろ今週中には始めよう。\n夏休みの宿題を1月に始めるという意味で非常事態を宣言するのだ。\n\n# 2021-01-14\n\n[Splr-0.6.0](https:\u002F\u002Fgithub.com\u002Fshnarazk\u002Fsplr\u002Fcommit\u002F55c6161a17b18752d8c33f9a5de9ae8e25cc88fc) リリースした。夏休み開始。 \n\n# 2021-01-18\n\n0.6.0はリリースしたけどどうせなら0.6.2をリリースしてから開始しよう。明日の予定。テーマはマルコフ性。",bodyHtml:"\u003Cp\u003E\u003Cstrong\u003Ecover image: https:\u002F\u002Funsplash.com\u002Fphotos\u002FUsSfqYdR64Q\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E動的なリスタートは本当に有効なのだろうか？\n自分がやってきた種々の実験結果からはLubyリスタートとの差は（有意）にあるように思うが、\n一方でせいぜい定数倍の差のようにも思える。\nパラメータを増やせば増やすほど手が届かない部分が増えてしまうので、もうそろそろ色々カウンターを突っ込んだりするくらいならLubyでいいのではいう方向にかなり傾いている。\nそもそもGlucose流のLBDのEMAを元にしたforce restartが有効であるためには学習節のよさは独立分布ではないことが前提なんだけど、これは本当なんだだろうか？\nどこかで評価してあっただろうか？\n手っ取り早くブランチ切って自分でやってみた。\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E実験対象: UUF250 100問\u003C\u002Fli\u003E\n\u003Cli\u003EEMA補正を掛けた Slpr-0.6.2 で rst-lbd-len を色々変えて、学習節が追加されるたびに(LBDのEMA, 新学習節のLBD)を出力。\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode\u003E# 2021 branchを使用\n$ parallel 'splrl-lbd {}' ::: uuf250*.cnf\n$ cargo run --bin ??? &lt; uuf*.csv &gt; LBDn.csv　#　新学習節LBDの分布を平均値に置き換え\n$ 適当にプロット\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EまずUU250に対するデフォルト設定において、矛盾発生の決定レベルに対するLBDをプロットすると以下のようになる。\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"\u002Fimg\u002F2021\u002F01-26\u002FUUF250-cDL-ave.png\" alt=\"\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E矛盾発生決定レベルとLBDの間には相関はほぼない。\nどのような発展においてもそれなりによい学習節が生成されることを考慮しなければならない。\n下図はそのヒートマップである。実際には大きな決定レベルは出現頻度が少ない。\n極端に高いレベルを避けるよりも持続する高レベルを避けることが重要となるのだろう。\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"\u002Fimg\u002F2021\u002F01-26\u002FUUF250-cDL-heatmap.png\" alt=\"\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E次にEMAの長さを24（デフォルト）,5, 3と変えて、LBDのEMAに対する新規学習節のLBDをプロットしてみたのが以下の図。\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"\u002Fimg\u002F2021\u002F01-26\u002FUUF250-LBD-ave.png\" alt=\"\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E決定レベルと違い、極めて強い相関が得られたことからLBDのEMAはよい未来予測になっていると言える。\nさらに長さを長くする方がより良い結果が得られる頃から同じような長さの節がしばらく生成されるという傾向があると言えよう。\u003C\u002Fp\u003E\n\u003Cp\u003E同じデータを平均値ではなくヒートマップで可視化してみた。\n上図が矛盾発生ごとにリスタートを掛けて全く連続性を排除したもので、下図はリスタートをしなかったものである。\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"\u002Fimg\u002F2021\u002F01-26\u002FUUF250-rlt0-heatmap.png\" alt=\"\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"\u002Fimg\u002F2021\u002F01-26\u002FUUF250-norestart-heatmap.png\" alt=\"\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E後者の方がより小さいLBDが生成されている。実際に実際実行時間も後者の方が圧倒的に短い。\n無作為な探索空間の選択よりもLBD値を使った戦略の方が、LBDの小さな領域に長く滞在できていると思われる。\u003C\u002Fp\u003E\n\u003Ch2\u003ETODO: デフォルトでのヒートマップへの言及\u003C\u002Fh2\u003E\n\u003Ch2\u003Eno-restartは極端な戦略。なぜもう一つの極端なanytine-restart戦略より圧倒的によいのか。\u003C\u002Fh2\u003E\n\u003Cp\u003Eactivityのメカニズムから矛盾解消の対象になった変数は再び選択されやすく、したがってassertされるまで集中的に選択されることが期待される。\n一方、anytime restartは（バックトラックと比べて網羅的再構築なので）対象が逸脱しやすく、activityの恩恵を十分に得ることができない。\n初期状態はともかく、矛盾はそれなりに十分に深く調べて（assertを見つける努力をして）からリスタートすべきである。\u003C\u002Fp\u003E\n\u003Cp\u003Eヒートマップにおいてno-restart の方が良い結果を示しているのは、assertがより速く進むことで、より簡単な問題を対象にできていたからではないだろうか。\u003C\u002Fp\u003E\n\u003Ch2\u003E結論\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003E探索空間はLBDで分類できるクラスタから構成されている。\u003C\u002Fli\u003E\n\u003Cli\u003Eより良いクラスタを選ぶことは実行速度の改善につながる。\u003C\u002Fli\u003E\n\u003Cli\u003ELBDのEMAはクラスタを選ぶためのよい尺度となっている。少なくともランダム選択よりはよい。\u003C\u002Fli\u003E\n\u003Cli\u003E突発的な大きなLBDを持つ節を避けるのではなく、平均EMAが大きなグループ（クラスタ）に突入している時に（できれば早期に）脱出できるというのがGlucose流の動的リスタートの持つ効果である。\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Chr\u003E\n\u003Ch1\u003E本文を書いたことで後ろに回されてしまったイントロとベルリンの壁\u003C\u002Fh1\u003E\n\u003Cp\u003E論文書くのは仕事じゃない。しかし一年に一度くらいは開発ではなくて、文章をまとめる一ヶ月があってもいいかもね。そもそも今年もCompetitionに出しそびれたし。それに夏といえば、宿題やるのが日本の文化。\n9月1日提出に間に合うようになんかしよう。爆音で音楽聴きながらlatex的なことをしよう。\u003C\u002Fp\u003E\n\u003Ch1\u003E2020-07-24\u003C\u002Fh1\u003E\n\u003Cul\u003E\n\u003Cli\u003E旧題: Restart as A Multi-Armed Bandid Problem\u003C\u002Fli\u003E\n\u003Cli\u003E新題: Lives of Clauses\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch1\u003E2020-07-27\u003C\u002Fh1\u003E\n\u003Cp\u003E0.4.2がいい結果を出しそうなので、それをリリースしてから、なぜ0.4.2がいいのかを説明できるようなものにしよう。\n&quot;Lives of Clauses&quot;はいいタイトル。\u003C\u002Fp\u003E\n\u003Ch1\u003E2020-08-12\u003C\u002Fh1\u003E\n\u003Cp\u003ESplr-0.4.2のリリースがずるずると延びてしまっていまだにとりかかれてない。。。。\nうーん、自分で言い出したくせに8月31日の1日でやっつけることになるのか。\nコロナのせいにできるような言い訳を考えておこう。。。\u003C\u002Fp\u003E\n\u003Ch1\u003E2020-08-24\u003C\u002Fh1\u003E\n\u003Cp\u003Eあと数日でSplr-0.4.2 改め Splr-0.5.0 がリリースできる。\nそして、もう数日しか夏休みは残ってないんですけどどうしましょう。\u003C\u002Fp\u003E\n\u003Ch1\u003E2020-09-01\u003C\u002Fh1\u003E\n\u003Cp\u003E今年の夏休みは9月下旬にはじまるという話を聞いたので、まだ手をつけない。\u003C\u002Fp\u003E\n\u003Ch1\u003E2021-01-13\u003C\u002Fh1\u003E\n\u003Cp\u003Eそろそろ手が付けられそうになってきたので、テーマ案を考える。\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E案1: 学習節の一生\u003C\u002Fli\u003E\n\u003Cli\u003E案2: 意外に影響が大きいvivicationの効果測定\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003Eずっと案1のつもりだったけど、今日急に案2もいいかもと思い出した。\nどちらにしろ今週中には始めよう。\n夏休みの宿題を1月に始めるという意味で非常事態を宣言するのだ。\u003C\u002Fp\u003E\n\u003Ch1\u003E2021-01-14\u003C\u002Fh1\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fshnarazk\u002Fsplr\u002Fcommit\u002F55c6161a17b18752d8c33f9a5de9ae8e25cc88fc\"\u003ESplr-0.6.0\u003C\u002Fa\u003E リリースした。夏休み開始。\u003C\u002Fp\u003E\n\u003Ch1\u003E2021-01-18\u003C\u002Fh1\u003E\n\u003Cp\u003E0.6.0はリリースしたけどどうせなら0.6.2をリリースしてから開始しよう。明日の予定。テーマはマルコフ性。\u003C\u002Fp\u003E\n",dir:"article\u002F.json\u002F2020",base:"2020-07-18-summer-homework.json",ext:".json",sourceBase:"2020-07-18-summer-homework.md",sourceExt:".md"}},title:{writable:true,enumerable:true,value:"Similarity of Clauses"},subtitle:{writable:true,enumerable:true,value:"夏休み実験室"},date:{writable:true,enumerable:true,value:"2021-01-26T00:00:00.000Z"},tags:{writable:true,enumerable:true,value:["SAT","splr"]},banner:{writable:true,enumerable:true,value:"https:\u002F\u002Fimages.unsplash.com\u002Fphoto-1483528237748-d9d8b5cae06d?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80"},bodyContent:{writable:true,enumerable:true,value:"**cover image: https:\u002F\u002Funsplash.com\u002Fphotos\u002FUsSfqYdR64Q**\n\n動的なリスタートは本当に有効なのだろうか？\n自分がやってきた種々の実験結果からはLubyリスタートとの差は（有意）にあるように思うが、\n一方でせいぜい定数倍の差のようにも思える。\nパラメータを増やせば増やすほど手が届かない部分が増えてしまうので、もうそろそろ色々カウンターを突っ込んだりするくらいならLubyでいいのではいう方向にかなり傾いている。\nそもそもGlucose流のLBDのEMAを元にしたforce restartが有効であるためには学習節のよさは独立分布ではないことが前提なんだけど、これは本当なんだだろうか？\nどこかで評価してあっただろうか？\n手っ取り早くブランチ切って自分でやってみた。\n\n- 実験対象: UUF250 100問\n- EMA補正を掛けた Slpr-0.6.2 で rst-lbd-len を色々変えて、学習節が追加されるたびに(LBDのEMA, 新学習節のLBD)を出力。\n\n```\n# 2021 branchを使用\n$ parallel 'splrl-lbd {}' ::: uuf250*.cnf\n$ cargo run --bin ??? \u003C uuf*.csv \u003E LBDn.csv　#　新学習節LBDの分布を平均値に置き換え\n$ 適当にプロット\n```\n\nまずUU250に対するデフォルト設定において、矛盾発生の決定レベルに対するLBDをプロットすると以下のようになる。\n\n![](\u002Fimg\u002F2021\u002F01-26\u002FUUF250-cDL-ave.png)\n\n矛盾発生決定レベルとLBDの間には相関はほぼない。\nどのような発展においてもそれなりによい学習節が生成されることを考慮しなければならない。\n下図はそのヒートマップである。実際には大きな決定レベルは出現頻度が少ない。\n極端に高いレベルを避けるよりも持続する高レベルを避けることが重要となるのだろう。\n\n![](\u002Fimg\u002F2021\u002F01-26\u002FUUF250-cDL-heatmap.png)\n\n次にEMAの長さを24（デフォルト）,5, 3と変えて、LBDのEMAに対する新規学習節のLBDをプロットしてみたのが以下の図。\n\n![](\u002Fimg\u002F2021\u002F01-26\u002FUUF250-LBD-ave.png)\n\n決定レベルと違い、極めて強い相関が得られたことからLBDのEMAはよい未来予測になっていると言える。\nさらに長さを長くする方がより良い結果が得られる頃から同じような長さの節がしばらく生成されるという傾向があると言えよう。\n\n同じデータを平均値ではなくヒートマップで可視化してみた。\n上図が矛盾発生ごとにリスタートを掛けて全く連続性を排除したもので、下図はリスタートをしなかったものである。\n\n![](\u002Fimg\u002F2021\u002F01-26\u002FUUF250-rlt0-heatmap.png)\n\n![](\u002Fimg\u002F2021\u002F01-26\u002FUUF250-norestart-heatmap.png)\n\n後者の方がより小さいLBDが生成されている。実際に実際実行時間も後者の方が圧倒的に短い。\n無作為な探索空間の選択よりもLBD値を使った戦略の方が、LBDの小さな領域に長く滞在できていると思われる。\n\n## TODO: デフォルトでのヒートマップへの言及\n\n## no-restartは極端な戦略。なぜもう一つの極端なanytine-restart戦略より圧倒的によいのか。\n\nactivityのメカニズムから矛盾解消の対象になった変数は再び選択されやすく、したがってassertされるまで集中的に選択されることが期待される。\n一方、anytime restartは（バックトラックと比べて網羅的再構築なので）対象が逸脱しやすく、activityの恩恵を十分に得ることができない。\n初期状態はともかく、矛盾はそれなりに十分に深く調べて（assertを見つける努力をして）からリスタートすべきである。\n\nヒートマップにおいてno-restart の方が良い結果を示しているのは、assertがより速く進むことで、より簡単な問題を対象にできていたからではないだろうか。\n\n## 結論\n\n- 探索空間はLBDで分類できるクラスタから構成されている。\n- より良いクラスタを選ぶことは実行速度の改善につながる。\n- LBDのEMAはクラスタを選ぶためのよい尺度となっている。少なくともランダム選択よりはよい。\n- 突発的な大きなLBDを持つ節を避けるのではなく、平均EMAが大きなグループ（クラスタ）に突入している時に（できれば早期に）脱出できるというのがGlucose流の動的リスタートの持つ効果である。\n\n--------------------------------------------------------\n\n# 本文を書いたことで後ろに回されてしまったイントロとベルリンの壁\n\n論文書くのは仕事じゃない。しかし一年に一度くらいは開発ではなくて、文章をまとめる一ヶ月があってもいいかもね。そもそも今年もCompetitionに出しそびれたし。それに夏といえば、宿題やるのが日本の文化。\n9月1日提出に間に合うようになんかしよう。爆音で音楽聴きながらlatex的なことをしよう。\n\n# 2020-07-24\n\n* 旧題: Restart as A Multi-Armed Bandid Problem\n* 新題: Lives of Clauses\n\n# 2020-07-27\n\n0.4.2がいい結果を出しそうなので、それをリリースしてから、なぜ0.4.2がいいのかを説明できるようなものにしよう。\n\"Lives of Clauses\"はいいタイトル。\n\n# 2020-08-12\n\nSplr-0.4.2のリリースがずるずると延びてしまっていまだにとりかかれてない。。。。\nうーん、自分で言い出したくせに8月31日の1日でやっつけることになるのか。\nコロナのせいにできるような言い訳を考えておこう。。。\n\n# 2020-08-24\n\nあと数日でSplr-0.4.2 改め Splr-0.5.0 がリリースできる。\nそして、もう数日しか夏休みは残ってないんですけどどうしましょう。\n\n# 2020-09-01\n\n今年の夏休みは9月下旬にはじまるという話を聞いたので、まだ手をつけない。\n\n# 2021-01-13\n\nそろそろ手が付けられそうになってきたので、テーマ案を考える。\n\n- 案1: 学習節の一生\n- 案2: 意外に影響が大きいvivicationの効果測定\n\nずっと案1のつもりだったけど、今日急に案2もいいかもと思い出した。\nどちらにしろ今週中には始めよう。\n夏休みの宿題を1月に始めるという意味で非常事態を宣言するのだ。\n\n# 2021-01-14\n\n[Splr-0.6.0](https:\u002F\u002Fgithub.com\u002Fshnarazk\u002Fsplr\u002Fcommit\u002F55c6161a17b18752d8c33f9a5de9ae8e25cc88fc) リリースした。夏休み開始。 \n\n# 2021-01-18\n\n0.6.0はリリースしたけどどうせなら0.6.2をリリースしてから開始しよう。明日の予定。テーマはマルコフ性。"},bodyHtml:{writable:true,enumerable:true,value:"\u003Cp\u003E\u003Cstrong\u003Ecover image: https:\u002F\u002Funsplash.com\u002Fphotos\u002FUsSfqYdR64Q\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E動的なリスタートは本当に有効なのだろうか？\n自分がやってきた種々の実験結果からはLubyリスタートとの差は（有意）にあるように思うが、\n一方でせいぜい定数倍の差のようにも思える。\nパラメータを増やせば増やすほど手が届かない部分が増えてしまうので、もうそろそろ色々カウンターを突っ込んだりするくらいならLubyでいいのではいう方向にかなり傾いている。\nそもそもGlucose流のLBDのEMAを元にしたforce restartが有効であるためには学習節のよさは独立分布ではないことが前提なんだけど、これは本当なんだだろうか？\nどこかで評価してあっただろうか？\n手っ取り早くブランチ切って自分でやってみた。\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E実験対象: UUF250 100問\u003C\u002Fli\u003E\n\u003Cli\u003EEMA補正を掛けた Slpr-0.6.2 で rst-lbd-len を色々変えて、学習節が追加されるたびに(LBDのEMA, 新学習節のLBD)を出力。\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode\u003E# 2021 branchを使用\n$ parallel 'splrl-lbd {}' ::: uuf250*.cnf\n$ cargo run --bin ??? &lt; uuf*.csv &gt; LBDn.csv　#　新学習節LBDの分布を平均値に置き換え\n$ 適当にプロット\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EまずUU250に対するデフォルト設定において、矛盾発生の決定レベルに対するLBDをプロットすると以下のようになる。\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"\u002Fimg\u002F2021\u002F01-26\u002FUUF250-cDL-ave.png\" alt=\"\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E矛盾発生決定レベルとLBDの間には相関はほぼない。\nどのような発展においてもそれなりによい学習節が生成されることを考慮しなければならない。\n下図はそのヒートマップである。実際には大きな決定レベルは出現頻度が少ない。\n極端に高いレベルを避けるよりも持続する高レベルを避けることが重要となるのだろう。\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"\u002Fimg\u002F2021\u002F01-26\u002FUUF250-cDL-heatmap.png\" alt=\"\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E次にEMAの長さを24（デフォルト）,5, 3と変えて、LBDのEMAに対する新規学習節のLBDをプロットしてみたのが以下の図。\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"\u002Fimg\u002F2021\u002F01-26\u002FUUF250-LBD-ave.png\" alt=\"\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E決定レベルと違い、極めて強い相関が得られたことからLBDのEMAはよい未来予測になっていると言える。\nさらに長さを長くする方がより良い結果が得られる頃から同じような長さの節がしばらく生成されるという傾向があると言えよう。\u003C\u002Fp\u003E\n\u003Cp\u003E同じデータを平均値ではなくヒートマップで可視化してみた。\n上図が矛盾発生ごとにリスタートを掛けて全く連続性を排除したもので、下図はリスタートをしなかったものである。\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"\u002Fimg\u002F2021\u002F01-26\u002FUUF250-rlt0-heatmap.png\" alt=\"\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"\u002Fimg\u002F2021\u002F01-26\u002FUUF250-norestart-heatmap.png\" alt=\"\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E後者の方がより小さいLBDが生成されている。実際に実際実行時間も後者の方が圧倒的に短い。\n無作為な探索空間の選択よりもLBD値を使った戦略の方が、LBDの小さな領域に長く滞在できていると思われる。\u003C\u002Fp\u003E\n\u003Ch2\u003ETODO: デフォルトでのヒートマップへの言及\u003C\u002Fh2\u003E\n\u003Ch2\u003Eno-restartは極端な戦略。なぜもう一つの極端なanytine-restart戦略より圧倒的によいのか。\u003C\u002Fh2\u003E\n\u003Cp\u003Eactivityのメカニズムから矛盾解消の対象になった変数は再び選択されやすく、したがってassertされるまで集中的に選択されることが期待される。\n一方、anytime restartは（バックトラックと比べて網羅的再構築なので）対象が逸脱しやすく、activityの恩恵を十分に得ることができない。\n初期状態はともかく、矛盾はそれなりに十分に深く調べて（assertを見つける努力をして）からリスタートすべきである。\u003C\u002Fp\u003E\n\u003Cp\u003Eヒートマップにおいてno-restart の方が良い結果を示しているのは、assertがより速く進むことで、より簡単な問題を対象にできていたからではないだろうか。\u003C\u002Fp\u003E\n\u003Ch2\u003E結論\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003E探索空間はLBDで分類できるクラスタから構成されている。\u003C\u002Fli\u003E\n\u003Cli\u003Eより良いクラスタを選ぶことは実行速度の改善につながる。\u003C\u002Fli\u003E\n\u003Cli\u003ELBDのEMAはクラスタを選ぶためのよい尺度となっている。少なくともランダム選択よりはよい。\u003C\u002Fli\u003E\n\u003Cli\u003E突発的な大きなLBDを持つ節を避けるのではなく、平均EMAが大きなグループ（クラスタ）に突入している時に（できれば早期に）脱出できるというのがGlucose流の動的リスタートの持つ効果である。\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Chr\u003E\n\u003Ch1\u003E本文を書いたことで後ろに回されてしまったイントロとベルリンの壁\u003C\u002Fh1\u003E\n\u003Cp\u003E論文書くのは仕事じゃない。しかし一年に一度くらいは開発ではなくて、文章をまとめる一ヶ月があってもいいかもね。そもそも今年もCompetitionに出しそびれたし。それに夏といえば、宿題やるのが日本の文化。\n9月1日提出に間に合うようになんかしよう。爆音で音楽聴きながらlatex的なことをしよう。\u003C\u002Fp\u003E\n\u003Ch1\u003E2020-07-24\u003C\u002Fh1\u003E\n\u003Cul\u003E\n\u003Cli\u003E旧題: Restart as A Multi-Armed Bandid Problem\u003C\u002Fli\u003E\n\u003Cli\u003E新題: Lives of Clauses\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch1\u003E2020-07-27\u003C\u002Fh1\u003E\n\u003Cp\u003E0.4.2がいい結果を出しそうなので、それをリリースしてから、なぜ0.4.2がいいのかを説明できるようなものにしよう。\n&quot;Lives of Clauses&quot;はいいタイトル。\u003C\u002Fp\u003E\n\u003Ch1\u003E2020-08-12\u003C\u002Fh1\u003E\n\u003Cp\u003ESplr-0.4.2のリリースがずるずると延びてしまっていまだにとりかかれてない。。。。\nうーん、自分で言い出したくせに8月31日の1日でやっつけることになるのか。\nコロナのせいにできるような言い訳を考えておこう。。。\u003C\u002Fp\u003E\n\u003Ch1\u003E2020-08-24\u003C\u002Fh1\u003E\n\u003Cp\u003Eあと数日でSplr-0.4.2 改め Splr-0.5.0 がリリースできる。\nそして、もう数日しか夏休みは残ってないんですけどどうしましょう。\u003C\u002Fp\u003E\n\u003Ch1\u003E2020-09-01\u003C\u002Fh1\u003E\n\u003Cp\u003E今年の夏休みは9月下旬にはじまるという話を聞いたので、まだ手をつけない。\u003C\u002Fp\u003E\n\u003Ch1\u003E2021-01-13\u003C\u002Fh1\u003E\n\u003Cp\u003Eそろそろ手が付けられそうになってきたので、テーマ案を考える。\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E案1: 学習節の一生\u003C\u002Fli\u003E\n\u003Cli\u003E案2: 意外に影響が大きいvivicationの効果測定\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003Eずっと案1のつもりだったけど、今日急に案2もいいかもと思い出した。\nどちらにしろ今週中には始めよう。\n夏休みの宿題を1月に始めるという意味で非常事態を宣言するのだ。\u003C\u002Fp\u003E\n\u003Ch1\u003E2021-01-14\u003C\u002Fh1\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fshnarazk\u002Fsplr\u002Fcommit\u002F55c6161a17b18752d8c33f9a5de9ae8e25cc88fc\"\u003ESplr-0.6.0\u003C\u002Fa\u003E リリースした。夏休み開始。\u003C\u002Fp\u003E\n\u003Ch1\u003E2021-01-18\u003C\u002Fh1\u003E\n\u003Cp\u003E0.6.0はリリースしたけどどうせなら0.6.2をリリースしてから開始しよう。明日の予定。テーマはマルコフ性。\u003C\u002Fp\u003E\n"},dir:{writable:true,enumerable:true,value:"article\u002F.json\u002F2020"},base:{writable:true,enumerable:true,value:"2020-07-18-summer-homework.json"},ext:{writable:true,enumerable:true,value:".json"},sourceBase:{writable:true,enumerable:true,value:"2020-07-18-summer-homework.md"},sourceExt:{writable:true,enumerable:true,value:".md"}})}],fetch:[],mutations:[]});