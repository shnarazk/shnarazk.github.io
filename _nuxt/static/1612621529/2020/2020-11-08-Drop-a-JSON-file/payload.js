__NUXT_JSONP__("/2020/2020-11-08-Drop-a-JSON-file", {data:[{article:Object.create(null,{default:{writable:true,enumerable:true,value:{title:"JSONファイルをドラッグ&ドロップする",subtitle:"SwiftUIの話",date:"2020-11-08T00:00:00.000Z",tags:["Swift"],bodyContent:"画像ファイルとかURLとかをドロップする話はそこそこ見つかるけど、JSONファイルをドロップするのに手こずったのでメモ。\n\n```swift\n  NavigationView { ... }\n  .onDrop(of: [\"public.json\"], isTargeted: nil) { providers, location in\n       if let item = providers.first {\n           item.loadItem(forTypeIdentifier: \"public.json\", options: nil) { (urlData, error) in\n               if let url = urlData as? URL {\n                   self.json = loadJson(url: url)\n               }\n           }\n           return true\n       }\n       return false\n }\n```\n\n* `\"public.json\"` の`public`とはなんなのか？\n* `isTargeted` とはなんなのか？\n* `Item` と `Object` の違いがよーわかってない。\n* 参考にしたページ（複数）ではクロージャの中には例のSystemサービススレッドにfetchをお願いするコードが入っていたが、ローカルファイルをロードするのにそれはいらんじゃろ、ということで削除。\n* `urlData`から`URL`型を作る過程も1ステップ削除してある。\n* `url` は `Data(contentOf:)`の引数に使える。",bodyHtml:"\u003Cp\u003E画像ファイルとかURLとかをドロップする話はそこそこ見つかるけど、JSONファイルをドロップするのに手こずったのでメモ。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs\"\u003E\u003Cspan class=\"hljs-type\"\u003ENavigationView\u003C\u002Fspan\u003E { \u003Cspan class=\"hljs-operator\"\u003E...\u003C\u002Fspan\u003E }\n  .onDrop(of: [\u003Cspan class=\"hljs-string\"\u003E&quot;public.json&quot;\u003C\u002Fspan\u003E], isTargeted: \u003Cspan class=\"hljs-literal\"\u003Enil\u003C\u002Fspan\u003E) { providers, location \u003Cspan class=\"hljs-keyword\"\u003Ein\u003C\u002Fspan\u003E\n       \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E item \u003Cspan class=\"hljs-operator\"\u003E=\u003C\u002Fspan\u003E providers.first {\n           item.loadItem(forTypeIdentifier: \u003Cspan class=\"hljs-string\"\u003E&quot;public.json&quot;\u003C\u002Fspan\u003E, options: \u003Cspan class=\"hljs-literal\"\u003Enil\u003C\u002Fspan\u003E) { (urlData, error) \u003Cspan class=\"hljs-keyword\"\u003Ein\u003C\u002Fspan\u003E\n               \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E url \u003Cspan class=\"hljs-operator\"\u003E=\u003C\u002Fspan\u003E urlData \u003Cspan class=\"hljs-keyword\"\u003Eas?\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-type\"\u003EURL\u003C\u002Fspan\u003E {\n                   \u003Cspan class=\"hljs-keyword\"\u003Eself\u003C\u002Fspan\u003E.json \u003Cspan class=\"hljs-operator\"\u003E=\u003C\u002Fspan\u003E loadJson(url: url)\n               }\n           }\n           \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-literal\"\u003Etrue\u003C\u002Fspan\u003E\n       }\n       \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-literal\"\u003Efalse\u003C\u002Fspan\u003E\n }\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cul\u003E\n\u003Cli\u003E\u003Ccode\u003E&quot;public.json&quot;\u003C\u002Fcode\u003E の\u003Ccode\u003Epublic\u003C\u002Fcode\u003Eとはなんなのか？\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003EisTargeted\u003C\u002Fcode\u003E とはなんなのか？\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003EItem\u003C\u002Fcode\u003E と \u003Ccode\u003EObject\u003C\u002Fcode\u003E の違いがよーわかってない。\u003C\u002Fli\u003E\n\u003Cli\u003E参考にしたページ（複数）ではクロージャの中には例のSystemサービススレッドにfetchをお願いするコードが入っていたが、ローカルファイルをロードするのにそれはいらんじゃろ、ということで削除。\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003EurlData\u003C\u002Fcode\u003Eから\u003Ccode\u003EURL\u003C\u002Fcode\u003E型を作る過程も1ステップ削除してある。\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Eurl\u003C\u002Fcode\u003E は \u003Ccode\u003EData(contentOf:)\u003C\u002Fcode\u003Eの引数に使える。\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n",dir:"article\u002F.json\u002F2020",base:"2020-11-08-Drop-a-JSON-file.json",ext:".json",sourceBase:"2020-11-08-Drop-a-JSON-file.md",sourceExt:".md"}},title:{writable:true,enumerable:true,value:"JSONファイルをドラッグ&ドロップする"},subtitle:{writable:true,enumerable:true,value:"SwiftUIの話"},date:{writable:true,enumerable:true,value:"2020-11-08T00:00:00.000Z"},tags:{writable:true,enumerable:true,value:["Swift"]},bodyContent:{writable:true,enumerable:true,value:"画像ファイルとかURLとかをドロップする話はそこそこ見つかるけど、JSONファイルをドロップするのに手こずったのでメモ。\n\n```swift\n  NavigationView { ... }\n  .onDrop(of: [\"public.json\"], isTargeted: nil) { providers, location in\n       if let item = providers.first {\n           item.loadItem(forTypeIdentifier: \"public.json\", options: nil) { (urlData, error) in\n               if let url = urlData as? URL {\n                   self.json = loadJson(url: url)\n               }\n           }\n           return true\n       }\n       return false\n }\n```\n\n* `\"public.json\"` の`public`とはなんなのか？\n* `isTargeted` とはなんなのか？\n* `Item` と `Object` の違いがよーわかってない。\n* 参考にしたページ（複数）ではクロージャの中には例のSystemサービススレッドにfetchをお願いするコードが入っていたが、ローカルファイルをロードするのにそれはいらんじゃろ、ということで削除。\n* `urlData`から`URL`型を作る過程も1ステップ削除してある。\n* `url` は `Data(contentOf:)`の引数に使える。"},bodyHtml:{writable:true,enumerable:true,value:"\u003Cp\u003E画像ファイルとかURLとかをドロップする話はそこそこ見つかるけど、JSONファイルをドロップするのに手こずったのでメモ。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs\"\u003E\u003Cspan class=\"hljs-type\"\u003ENavigationView\u003C\u002Fspan\u003E { \u003Cspan class=\"hljs-operator\"\u003E...\u003C\u002Fspan\u003E }\n  .onDrop(of: [\u003Cspan class=\"hljs-string\"\u003E&quot;public.json&quot;\u003C\u002Fspan\u003E], isTargeted: \u003Cspan class=\"hljs-literal\"\u003Enil\u003C\u002Fspan\u003E) { providers, location \u003Cspan class=\"hljs-keyword\"\u003Ein\u003C\u002Fspan\u003E\n       \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E item \u003Cspan class=\"hljs-operator\"\u003E=\u003C\u002Fspan\u003E providers.first {\n           item.loadItem(forTypeIdentifier: \u003Cspan class=\"hljs-string\"\u003E&quot;public.json&quot;\u003C\u002Fspan\u003E, options: \u003Cspan class=\"hljs-literal\"\u003Enil\u003C\u002Fspan\u003E) { (urlData, error) \u003Cspan class=\"hljs-keyword\"\u003Ein\u003C\u002Fspan\u003E\n               \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E url \u003Cspan class=\"hljs-operator\"\u003E=\u003C\u002Fspan\u003E urlData \u003Cspan class=\"hljs-keyword\"\u003Eas?\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-type\"\u003EURL\u003C\u002Fspan\u003E {\n                   \u003Cspan class=\"hljs-keyword\"\u003Eself\u003C\u002Fspan\u003E.json \u003Cspan class=\"hljs-operator\"\u003E=\u003C\u002Fspan\u003E loadJson(url: url)\n               }\n           }\n           \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-literal\"\u003Etrue\u003C\u002Fspan\u003E\n       }\n       \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-literal\"\u003Efalse\u003C\u002Fspan\u003E\n }\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cul\u003E\n\u003Cli\u003E\u003Ccode\u003E&quot;public.json&quot;\u003C\u002Fcode\u003E の\u003Ccode\u003Epublic\u003C\u002Fcode\u003Eとはなんなのか？\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003EisTargeted\u003C\u002Fcode\u003E とはなんなのか？\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003EItem\u003C\u002Fcode\u003E と \u003Ccode\u003EObject\u003C\u002Fcode\u003E の違いがよーわかってない。\u003C\u002Fli\u003E\n\u003Cli\u003E参考にしたページ（複数）ではクロージャの中には例のSystemサービススレッドにfetchをお願いするコードが入っていたが、ローカルファイルをロードするのにそれはいらんじゃろ、ということで削除。\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003EurlData\u003C\u002Fcode\u003Eから\u003Ccode\u003EURL\u003C\u002Fcode\u003E型を作る過程も1ステップ削除してある。\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Eurl\u003C\u002Fcode\u003E は \u003Ccode\u003EData(contentOf:)\u003C\u002Fcode\u003Eの引数に使える。\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n"},dir:{writable:true,enumerable:true,value:"article\u002F.json\u002F2020"},base:{writable:true,enumerable:true,value:"2020-11-08-Drop-a-JSON-file.json"},ext:{writable:true,enumerable:true,value:".json"},sourceBase:{writable:true,enumerable:true,value:"2020-11-08-Drop-a-JSON-file.md"},sourceExt:{writable:true,enumerable:true,value:".md"}})}],fetch:[],mutations:[]});