__NUXT_JSONP__("/2018/2018-07-06-broken-intero", {data:[{article:Object.create(null,{default:{writable:true,enumerable:true,value:{title:"How to fix a nuisance by Intero on Emacs?",subtitle:"InteroでEmacsがおかしくなる問題",date:"2018-07-06T00:00:00.000Z",tags:["emacs","haskell"],bodyContent:"At a directory without stack configuration, emacs is *devastated* by the initialization step of Intero.\nThis is a record of my atemps to fix.\n\n### 2018-07-06: Stop it!\n\n```lisp\n(defun auto-revert-notify-add-watch ()\n  \"Enable file notification for current buffer's associated file.\"\n  ;; We can assume that `buffer-file-name' and\n  ;; `auto-revert-use-notify' are non-nil.\n  (if (or (string-match auto-revert-notify-exclude-dir-regexp\n\t\t\t(expand-file-name (or default-directory \"\")))\n\t  (file-symlink-p (or buffer-file-name default-directory)))\n\n      ;; Fallback to file checks.\n      (setq-local auto-revert-use-notify nil)\n\n    (when (not auto-revert-notify-watch-descriptor)\n      (setq auto-revert-notify-watch-descriptor\n\t    (ignore-errors\n\t      (if buffer-file-name\n\t\t  (file-notify-add-watch\n\t\t   (expand-file-name buffer-file-name default-directory)\n\t\t   '(change attribute-change)\n\t\t   'auto-revert-notify-handler)\n\t\t(file-notify-add-watch\n\t\t (expand-file-name default-directory)\n\t\t '(change)\n\t\t 'auto-revert-notify-handler))))\n      (if auto-revert-notify-watch-descriptor\n\t  (progn\n\t    (puthash\n\t     auto-revert-notify-watch-descriptor\n\t     (cons (current-buffer)\n\t\t   (gethash auto-revert-notify-watch-descriptor\n\t\t\t    auto-revert-notify-watch-descriptor-hash-list))\n\t     auto-revert-notify-watch-descriptor-hash-list)\n\t    (add-hook 'kill-buffer-hook\n\t\t      #'auto-revert-notify-rm-watch nil t))\n\t;; Fallback to file checks.\n\t(setq-local auto-revert-use-notify nil)))))\n```",bodyHtml:"\u003Cp\u003EAt a directory without stack configuration, emacs is \u003Cem\u003Edevastated\u003C\u002Fem\u003E by the initialization step of Intero.\nThis is a record of my atemps to fix.\u003C\u002Fp\u003E\n\u003Ch3\u003E2018-07-06: Stop it!\u003C\u002Fh3\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs\"\u003E(\u003Cspan class=\"hljs-name\"\u003Edefun\u003C\u002Fspan\u003E auto-revert-notify-add-watch ()\n  \u003Cspan class=\"hljs-string\"\u003E&quot;Enable file notification for current buffer&#x27;s associated file.&quot;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-comment\"\u003E;; We can assume that `buffer-file-name&#x27; and\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-comment\"\u003E;; `auto-revert-use-notify&#x27; are non-nil.\u003C\u002Fspan\u003E\n  (\u003Cspan class=\"hljs-name\"\u003Eif\u003C\u002Fspan\u003E (\u003Cspan class=\"hljs-name\"\u003Eor\u003C\u002Fspan\u003E (\u003Cspan class=\"hljs-name\"\u003Estring-match\u003C\u002Fspan\u003E auto-revert-notify-exclude-dir-regexp\n\t\t\t(\u003Cspan class=\"hljs-name\"\u003Eexpand-file-name\u003C\u002Fspan\u003E (\u003Cspan class=\"hljs-name\"\u003Eor\u003C\u002Fspan\u003E default-directory \u003Cspan class=\"hljs-string\"\u003E&quot;&quot;\u003C\u002Fspan\u003E)))\n\t  (\u003Cspan class=\"hljs-name\"\u003Efile-symlink-p\u003C\u002Fspan\u003E (\u003Cspan class=\"hljs-name\"\u003Eor\u003C\u002Fspan\u003E buffer-file-name default-directory)))\n\n      \u003Cspan class=\"hljs-comment\"\u003E;; Fallback to file checks.\u003C\u002Fspan\u003E\n      (\u003Cspan class=\"hljs-name\"\u003Esetq-local\u003C\u002Fspan\u003E auto-revert-use-notify \u003Cspan class=\"hljs-literal\"\u003Enil\u003C\u002Fspan\u003E)\n\n    (\u003Cspan class=\"hljs-name\"\u003Ewhen\u003C\u002Fspan\u003E (\u003Cspan class=\"hljs-name\"\u003Enot\u003C\u002Fspan\u003E auto-revert-notify-watch-descriptor)\n      (\u003Cspan class=\"hljs-name\"\u003Esetq\u003C\u002Fspan\u003E auto-revert-notify-watch-descriptor\n\t    (\u003Cspan class=\"hljs-name\"\u003Eignore-errors\u003C\u002Fspan\u003E\n\t      (\u003Cspan class=\"hljs-name\"\u003Eif\u003C\u002Fspan\u003E buffer-file-name\n\t\t  (\u003Cspan class=\"hljs-name\"\u003Efile-notify-add-watch\u003C\u002Fspan\u003E\n\t\t   (\u003Cspan class=\"hljs-name\"\u003Eexpand-file-name\u003C\u002Fspan\u003E buffer-file-name default-directory)\n\t\t   &#x27;(change attribute-change)\n\t\t   &#x27;auto-revert-notify-handler)\n\t\t(\u003Cspan class=\"hljs-name\"\u003Efile-notify-add-watch\u003C\u002Fspan\u003E\n\t\t (\u003Cspan class=\"hljs-name\"\u003Eexpand-file-name\u003C\u002Fspan\u003E default-directory)\n\t\t &#x27;(change)\n\t\t &#x27;auto-revert-notify-handler))))\n      (\u003Cspan class=\"hljs-name\"\u003Eif\u003C\u002Fspan\u003E auto-revert-notify-watch-descriptor\n\t  (\u003Cspan class=\"hljs-name\"\u003Eprogn\u003C\u002Fspan\u003E\n\t    (\u003Cspan class=\"hljs-name\"\u003Eputhash\u003C\u002Fspan\u003E\n\t     auto-revert-notify-watch-descriptor\n\t     (\u003Cspan class=\"hljs-name\"\u003Econs\u003C\u002Fspan\u003E (\u003Cspan class=\"hljs-name\"\u003Ecurrent-buffer\u003C\u002Fspan\u003E)\n\t\t   (\u003Cspan class=\"hljs-name\"\u003Egethash\u003C\u002Fspan\u003E auto-revert-notify-watch-descriptor\n\t\t\t    auto-revert-notify-watch-descriptor-hash-list))\n\t     auto-revert-notify-watch-descriptor-hash-list)\n\t    (\u003Cspan class=\"hljs-name\"\u003Eadd-hook\u003C\u002Fspan\u003E &#x27;kill-buffer-hook\n\t\t      #&#x27;auto-revert-notify-rm-watch \u003Cspan class=\"hljs-literal\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-literal\"\u003Et\u003C\u002Fspan\u003E))\n\t\u003Cspan class=\"hljs-comment\"\u003E;; Fallback to file checks.\u003C\u002Fspan\u003E\n\t(\u003Cspan class=\"hljs-name\"\u003Esetq-local\u003C\u002Fspan\u003E auto-revert-use-notify \u003Cspan class=\"hljs-literal\"\u003Enil\u003C\u002Fspan\u003E)))))\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E",dir:"article\u002F.json\u002F2018",base:"2018-07-06-broken-intero.json",ext:".json",sourceBase:"2018-07-06-broken-intero.md",sourceExt:".md"}},title:{writable:true,enumerable:true,value:"How to fix a nuisance by Intero on Emacs?"},subtitle:{writable:true,enumerable:true,value:"InteroでEmacsがおかしくなる問題"},date:{writable:true,enumerable:true,value:"2018-07-06T00:00:00.000Z"},tags:{writable:true,enumerable:true,value:["emacs","haskell"]},bodyContent:{writable:true,enumerable:true,value:"At a directory without stack configuration, emacs is *devastated* by the initialization step of Intero.\nThis is a record of my atemps to fix.\n\n### 2018-07-06: Stop it!\n\n```lisp\n(defun auto-revert-notify-add-watch ()\n  \"Enable file notification for current buffer's associated file.\"\n  ;; We can assume that `buffer-file-name' and\n  ;; `auto-revert-use-notify' are non-nil.\n  (if (or (string-match auto-revert-notify-exclude-dir-regexp\n\t\t\t(expand-file-name (or default-directory \"\")))\n\t  (file-symlink-p (or buffer-file-name default-directory)))\n\n      ;; Fallback to file checks.\n      (setq-local auto-revert-use-notify nil)\n\n    (when (not auto-revert-notify-watch-descriptor)\n      (setq auto-revert-notify-watch-descriptor\n\t    (ignore-errors\n\t      (if buffer-file-name\n\t\t  (file-notify-add-watch\n\t\t   (expand-file-name buffer-file-name default-directory)\n\t\t   '(change attribute-change)\n\t\t   'auto-revert-notify-handler)\n\t\t(file-notify-add-watch\n\t\t (expand-file-name default-directory)\n\t\t '(change)\n\t\t 'auto-revert-notify-handler))))\n      (if auto-revert-notify-watch-descriptor\n\t  (progn\n\t    (puthash\n\t     auto-revert-notify-watch-descriptor\n\t     (cons (current-buffer)\n\t\t   (gethash auto-revert-notify-watch-descriptor\n\t\t\t    auto-revert-notify-watch-descriptor-hash-list))\n\t     auto-revert-notify-watch-descriptor-hash-list)\n\t    (add-hook 'kill-buffer-hook\n\t\t      #'auto-revert-notify-rm-watch nil t))\n\t;; Fallback to file checks.\n\t(setq-local auto-revert-use-notify nil)))))\n```"},bodyHtml:{writable:true,enumerable:true,value:"\u003Cp\u003EAt a directory without stack configuration, emacs is \u003Cem\u003Edevastated\u003C\u002Fem\u003E by the initialization step of Intero.\nThis is a record of my atemps to fix.\u003C\u002Fp\u003E\n\u003Ch3\u003E2018-07-06: Stop it!\u003C\u002Fh3\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs\"\u003E(\u003Cspan class=\"hljs-name\"\u003Edefun\u003C\u002Fspan\u003E auto-revert-notify-add-watch ()\n  \u003Cspan class=\"hljs-string\"\u003E&quot;Enable file notification for current buffer&#x27;s associated file.&quot;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-comment\"\u003E;; We can assume that `buffer-file-name&#x27; and\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-comment\"\u003E;; `auto-revert-use-notify&#x27; are non-nil.\u003C\u002Fspan\u003E\n  (\u003Cspan class=\"hljs-name\"\u003Eif\u003C\u002Fspan\u003E (\u003Cspan class=\"hljs-name\"\u003Eor\u003C\u002Fspan\u003E (\u003Cspan class=\"hljs-name\"\u003Estring-match\u003C\u002Fspan\u003E auto-revert-notify-exclude-dir-regexp\n\t\t\t(\u003Cspan class=\"hljs-name\"\u003Eexpand-file-name\u003C\u002Fspan\u003E (\u003Cspan class=\"hljs-name\"\u003Eor\u003C\u002Fspan\u003E default-directory \u003Cspan class=\"hljs-string\"\u003E&quot;&quot;\u003C\u002Fspan\u003E)))\n\t  (\u003Cspan class=\"hljs-name\"\u003Efile-symlink-p\u003C\u002Fspan\u003E (\u003Cspan class=\"hljs-name\"\u003Eor\u003C\u002Fspan\u003E buffer-file-name default-directory)))\n\n      \u003Cspan class=\"hljs-comment\"\u003E;; Fallback to file checks.\u003C\u002Fspan\u003E\n      (\u003Cspan class=\"hljs-name\"\u003Esetq-local\u003C\u002Fspan\u003E auto-revert-use-notify \u003Cspan class=\"hljs-literal\"\u003Enil\u003C\u002Fspan\u003E)\n\n    (\u003Cspan class=\"hljs-name\"\u003Ewhen\u003C\u002Fspan\u003E (\u003Cspan class=\"hljs-name\"\u003Enot\u003C\u002Fspan\u003E auto-revert-notify-watch-descriptor)\n      (\u003Cspan class=\"hljs-name\"\u003Esetq\u003C\u002Fspan\u003E auto-revert-notify-watch-descriptor\n\t    (\u003Cspan class=\"hljs-name\"\u003Eignore-errors\u003C\u002Fspan\u003E\n\t      (\u003Cspan class=\"hljs-name\"\u003Eif\u003C\u002Fspan\u003E buffer-file-name\n\t\t  (\u003Cspan class=\"hljs-name\"\u003Efile-notify-add-watch\u003C\u002Fspan\u003E\n\t\t   (\u003Cspan class=\"hljs-name\"\u003Eexpand-file-name\u003C\u002Fspan\u003E buffer-file-name default-directory)\n\t\t   &#x27;(change attribute-change)\n\t\t   &#x27;auto-revert-notify-handler)\n\t\t(\u003Cspan class=\"hljs-name\"\u003Efile-notify-add-watch\u003C\u002Fspan\u003E\n\t\t (\u003Cspan class=\"hljs-name\"\u003Eexpand-file-name\u003C\u002Fspan\u003E default-directory)\n\t\t &#x27;(change)\n\t\t &#x27;auto-revert-notify-handler))))\n      (\u003Cspan class=\"hljs-name\"\u003Eif\u003C\u002Fspan\u003E auto-revert-notify-watch-descriptor\n\t  (\u003Cspan class=\"hljs-name\"\u003Eprogn\u003C\u002Fspan\u003E\n\t    (\u003Cspan class=\"hljs-name\"\u003Eputhash\u003C\u002Fspan\u003E\n\t     auto-revert-notify-watch-descriptor\n\t     (\u003Cspan class=\"hljs-name\"\u003Econs\u003C\u002Fspan\u003E (\u003Cspan class=\"hljs-name\"\u003Ecurrent-buffer\u003C\u002Fspan\u003E)\n\t\t   (\u003Cspan class=\"hljs-name\"\u003Egethash\u003C\u002Fspan\u003E auto-revert-notify-watch-descriptor\n\t\t\t    auto-revert-notify-watch-descriptor-hash-list))\n\t     auto-revert-notify-watch-descriptor-hash-list)\n\t    (\u003Cspan class=\"hljs-name\"\u003Eadd-hook\u003C\u002Fspan\u003E &#x27;kill-buffer-hook\n\t\t      #&#x27;auto-revert-notify-rm-watch \u003Cspan class=\"hljs-literal\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-literal\"\u003Et\u003C\u002Fspan\u003E))\n\t\u003Cspan class=\"hljs-comment\"\u003E;; Fallback to file checks.\u003C\u002Fspan\u003E\n\t(\u003Cspan class=\"hljs-name\"\u003Esetq-local\u003C\u002Fspan\u003E auto-revert-use-notify \u003Cspan class=\"hljs-literal\"\u003Enil\u003C\u002Fspan\u003E)))))\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E"},dir:{writable:true,enumerable:true,value:"article\u002F.json\u002F2018"},base:{writable:true,enumerable:true,value:"2018-07-06-broken-intero.json"},ext:{writable:true,enumerable:true,value:".json"},sourceBase:{writable:true,enumerable:true,value:"2018-07-06-broken-intero.md"},sourceExt:{writable:true,enumerable:true,value:".md"}})}],fetch:[],mutations:[]});