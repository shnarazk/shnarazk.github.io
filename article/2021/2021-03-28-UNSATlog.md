---
title: UNSAT LOG, 2021, Mar.
subtitle: Vol.2, No.3.
date: 2021-03-28
tags: ["SAT", "splr", "unsatlog"]
banner: /img/2021/03-28/banner.jpg
---
# UNSATlog

## Splr-0.7.1リリースのはずが

前号を出したのが12日でそれから2週間足らずなので、Splr-0.7.1をリリースしたことしか書くことないよなあと思っていたら、リリース前のルーチンワークのベンチマークの検証中にエラーが発見されてしまった。

まさか、UNSAT問題をSATと答えるなんて！
それも、原因モジュールの同定に数時間かかることになってしまって、半日経っても何が問題なのかすら判明できていない有様。
ちょっとこのバグはキツい。リリースは（楽観的にみて）1週間ほど延期になりそうだ。

という以上の内容だけでvol.3を出して、Splr-0.7.1のリリースのタイミングで次の号を出し、そこで UNSAT logの号数を実暦に合わせよう。ああ、それだけが楽しみ。

## 2021-04-02

やっと、やっと、原因の節が特定できそう。`watch`が適切なリテラルを持ってない。
多分shrink, shortenでのリテラル削除に監視リテラルが追従してないようだ。

```
$ splr aes.cnf
aes.cnf                                      501284,2928183 |time:     5.21
 #conflict:          0, #decision:            0, #propagate:         221128
  Assignment|#rem:    34160, #ass:   221128, #elm:   245996, prg%:  93.1855
      Clause|Remv:        0, LBD2:        0, Binc:  2472979, Perm:  4073761
     Restart|#BLK:        0, #RST:        0, trgr:        1, peak:        1
         LBD|avrg:   0.0000, trnd:      NaN, depG:   0.0000, /dpc:     0.00
    Conflict|tASG:      NaN, cLvl:     0.00, bLvl:     0.00, /ppc:     0.00
        misc|elim:        1, #sub:    87499, core:   501284, /cpr:     0.00
unreachable core: 24650
[src/cdb/db.rs:958] 
  (l, w.blocker, w.c, &c.lits)
  = ( L151359, L158797, Cid3949122, [ L151358, L149809, L151175 ])
```

この結果を出すのに実行時間は3時間越え。
原因を正確につきとめようと細かくチェックを入れたら10時間経ってもコアサイズが31000を下回らなかった。
今日中に塞げるだろうか。

## 2021-04-03

塞げたような気がする。
まだ結論が出てないので「気がする」としか書きようがないのが、とにかく検証中。
バグによって偶然解けたことになってしまった問題なので、何時間かかっても解き、さらにそれが無謬であることを証明しなければならない。
計算が終わるまでじっと我慢しなくては。


ダメだった。この結果を出すのに7時間。ベスト3に入る難問。

```
$ splr -t 50000 -c aes.cnf                                                                                 
aes.cnf                                      501284,2928183 |time: 24585.10
 #conflict:   16888219, #decision:     31352807, #propagate:     5559560810
  Assignment|#rem:     8797, #ass:   243789, #elm:   248698, prg%:  98.2451
      Clause|Remv:   798625, LBD2:    24841, Binc:  2484735, Perm:  8987095
     Restart|#BLK:     7868, #RST:     8946, trgr:        1, peak:      128
         LBD|avrg:   7.0407, trnd:   0.3329, depG:   4.9266, /dpc:     1.62
    Conflict|tASG:   0.0247, cLvl:   313.07, bLvl:   311.69, /ppc:    23.16
        misc|elim:       28, #sub:   101678, core:        0, /cpr:  1676.43
      Result|file: ./ans_aes.cnf
s SATISFIABLE: aes.cnf
```

