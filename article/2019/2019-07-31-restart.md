---
title: A Consideration about Restart (2019-07-31)
subtitle: （部分的）リスタートの意義
date: 2019-08-25
tags: ['SAT', 'issue']
---

### これまでのまとめ

- [First UIP distribution (2019-07-21)](/2019/2019-07-21-first-UIP-distribution/)
- [Development of Var activities (2019-07-11)](/2019/2019-07-11-varact-distribution/)
- [Some Stats about Partial Restart (2019-08-04)](/2019/4f2a110a30ee837b/obs/)

求解状況の平滑化された数値化を実現して、それをリスタートに反映させようとしてきた。
しかし、リスタートは本当に必要なのだろうか。
途中で打ち切るという非連続な、余計なものを持ち込むから制御が複雑怪奇になるのであって、
適切なバックトラックレベルの計算の中に部分的リスタートとして組み込んでしまえばいいだけではなかろうか。

何故なら、ランダムウォークよりもクラスタ（部分問題を構成する変数集合）間の遷移モデルの方がよさそうだから。

- クラスタから出ないように（そのためにはリスタートは掛けない）、部分的リスタートを実行
- 停滞したら大きくジャンプして次のクラスタを探す
- クラスタを定義する候補の一つが割り当て履歴に依存する First UIP 集合。
  これは定義から、他のクラスタとのリンクを切る可能性を持つ変数である。
  それらを集めればこれは非常によい局所性を示すようになるのではなかろうか。

この仮定が正しいなら、**変数の最終割当て**と**求解対象のクラスタの時刻分布**
は相関を示すはずだし、それはリスタートにより離散クラスタ的な傾向を示すはず。
与えられた問題はクラスタを解きながら（部分的）リスタートによって遷移することで解けるだろう。

ただ、ここの「変数割当て」というのは定義が難しい。
割当てが決定したと言いたいのだろうが他の変数のためのバックトラックによって簡単に壊れてしまう。
部分問題ではなく全体での割り当てならそれは最後のバックトラック以降だけしか見ないことになる。

結局、その意味するものは[Development of Var activities (2019-07-11)](/2019/2019-07-11-varact-distribution/)で考えた
`変数活性度の分散`、あるいはその近似のFUP集合の大きさに帰着するようだ。

この結果を（部分的）リスタートに反映させた戦略を実装評価すべきである。
ということで[Some Stats about Partial Restart (2019-08-04)](/2019/4f2a110a30ee837b/obs/)で実装を試し
てみたのだが、いい成果にはならなかった。

# 2019-08-20

およそ一ヶ月間ずっとscrap and buildを繰り返して、そこそこの実証も得られた。

- リテラルaからリテラルbを導出する手間とその逆の手間は同じではない。オーダーレベルで違う。
  **だからリスタートには意味がある。**
- 問題が疎なクラスタに分割できるとすると、UNSAT問題はUNSATなクラスタを見つけることが必要。
  SATクラスタは実は求解には寄与しない（がもちろん前もって知ることは不可能）。
- 現在のrewarding & phase-savingの副産物としてハードクラスタに当たると割り当て数は減少する。
  これは矛盾している部分から割り当てようとするため。
  その結果クラスタに高い確率で含まれる変数であっても矛盾解消の時点で割り当てがなくなることがある。
  クラスタを維持するという目的に関しては部分的リスタートの効果は疑問。
- クラスタは閉集合ではない。割り当て対象リテラルをクラスタに含まれないものから取れば明らかに漸増する。
  その不動点は問題を構成する閉集合そのものになってしまう。
- にも関わらず、その増え方には特徴が見られる。
  明らかな拡大期と停滞期からなる問題もあれば、定常的に増大する問題もある。
  変数数が少ない3SAT問題などでは短期間で極大化してしまう。
- 停滞期は難しいクラスタに突っ込んだ状態と考えてよい。
  停滞期に至るまでに解けなかったなら解くべき問題は他にあると考えるべきか。
  実験結果はこの方向性を強く示唆しているようだ。

# 2019-08-24

さらにscrap and build。

- EMAベースのLBDによる枝刈りはそれなりに説得力ある。なんといっても時間平均値だから。
  しかし、学習節の評価と求解打ち切りの尺度の関係がいまひとつ不明な気がする。
  しかしハードクラスタに突入したからリスタートをかけたいのなら、目的と手段の間にズレが生じているのではないか。
  手間がかかり過ぎる、すなわち大きなクラスタに突入したことをもってリスタートの契機にすべきでは。
- 求解中はリスタートを禁止し、時間超過の場合のみリスタートをするならば、割当量とLBDという2種類の評価尺度を持ち出す必要はなくなり、より簡潔なものになる。

