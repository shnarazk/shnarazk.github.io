---
title: Similarity of Clauses
subtitle: 夏休み実験室
date: 2021-01-26
tags: ["SAT", "splr"]
banner: "https://images.unsplash.com/photo-1483528237748-d9d8b5cae06d?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80"
---
**cover image: https://unsplash.com/photos/UsSfqYdR64Q**

動的なリスタートは本当に有効なのだろうか？
自分がやってきた種々の実験結果からはLubyリスタートとの差は（有意）にあるように思うが、
一方でせいぜい定数倍の差のようにも思える。
パラメータを増やせば増やすほど手が届かない部分が増えてしまうので、もうそろそろ色々カウンターを突っ込んだりするくらいならLubyでいいのではいう方向にかなり傾いている。
そもそもGlucose流のLBDのEMAを元にしたforce restartが有効であるためには学習節のよさは独立分布ではないことが前提なんだけど、これは本当なんだだろうか？
どこかで評価してあっただろうか？
手っ取り早くブランチ切って自分でやってみた。

- 実験対象: UUF250 100問
- EMA補正を掛けた Slpr-0.6.2 で rst-lbd-len を色々変えて、学習節が追加されるたびに(LBDのEMA, 新学習節のLBD)を出力。

```
# 2021 branchを使用
$ parallel 'splrl-lbd {}' ::: uuf250*.cnf
$ cargo run --bin ??? < uuf*.csv > LBDn.csv　#　新学習節LBDの分布を平均値に置き換え
$ 適当にプロット
```


長さを24（デフォルト）,5, 3と変えて、プロットしてみたのが以下の図。

極めて強い相関が得られた。うーむ。つまり動的リスタートは合理的であると。

なんちゃって。

高いLBDが出るためにはそもそも決定レベルがそれ以上にないといけないわけで、EMAが高ければそういう決定レベルに位置することを意味しているのだから、平均だか分散だかが大きくなるのは当たり前の話。
むしろ長さが24以下の場合には傾き1を下回っており、長さ24でやや1より大きな値になるということが重要なのでは。
しかしそれも十分に長期間のサンプリングをするならば、この間、動的リスタートの当然の挙動としてリスタートを掛けないので矛盾解消による決定レベルの変動はあるものの（うーん、どちらかと言えば）決定レベルは増加の傾向にあるはずなので、後から生成される節のLBDが大きいのは当然である、と言えるのでは。
ここまでは、大きな節が出てきてもそれは決定レベルが高いことの副作用であって、しょうがないのレベルという話。

なので決定レベルが低いところへ遷移できればリスタートは意味がある。（つまりLBDは決定レベルと高い相関を持つ観測変数！？）
つまり「リスタートを掛けても結局同じような学習節しか出てこない」と言えるのであれば動的リスタートの合理性はかなり薄まる。言えないのであれば、マルコフ性はあると言わざるを得ない。


--------------------------------------------------------

# イントロとベルリンの壁

論文書くのは仕事じゃない。しかし一年に一度くらいは開発ではなくて、文章をまとめる一ヶ月があってもいいかもね。そもそも今年もCompetitionに出しそびれたし。それに夏といえば、宿題やるのが日本の文化。
9月1日提出に間に合うようになんかしよう。爆音で音楽聴きながらlatex的なことをしよう。

# 2020-07-24

* 旧題: Restart as A Multi-Armed Bandid Problem
* 新題: Lives of Clauses

# 2020-07-27

0.4.2がいい結果を出しそうなので、それをリリースしてから、なぜ0.4.2がいいのかを説明できるようなものにしよう。
"Lives of Clauses"はいいタイトル。

# 2020-08-12

Splr-0.4.2のリリースがずるずると延びてしまっていまだにとりかかれてない。。。。
うーん、自分で言い出したくせに8月31日の1日でやっつけることになるのか。
コロナのせいにできるような言い訳を考えておこう。。。

# 2020-08-24

あと数日でSplr-0.4.2 改め Splr-0.5.0 がリリースできる。
そして、もう数日しか夏休みは残ってないんですけどどうしましょう。

# 2020-09-01

今年の夏休みは9月下旬にはじまるという話を聞いたので、まだ手をつけない。

# 2021-01-13

そろそろ手が付けられそうになってきたので、テーマ案を考える。

- 案1: 学習節の一生
- 案2: 意外に影響が大きいvivicationの効果測定

ずっと案1のつもりだったけど、今日急に案2もいいかもと思い出した。
どちらにしろ今週中には始めよう。
夏休みの宿題を1月に始めるという意味で非常事態を宣言するのだ。

# 2021-01-14

[Splr-0.6.0](https://github.com/shnarazk/splr/commit/55c6161a17b18752d8c33f9a5de9ae8e25cc88fc) リリースした。夏休み開始。 

# 2021-01-18

0.6.0はリリースしたけどどうせなら0.6.2をリリースしてから開始しよう。明日の予定。テーマはマルコフ性。
